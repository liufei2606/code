<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>sample</title>
    <script src="./../static/js/vue.js"></script>
    <script src="./../static/js/lodash.js"></script>
    <script src="./../static/js/axios.js"></script>
  </head>

  <body>
    <div id="app">
      <h3>å£°æ˜å¼æ¸²æŸ“ï½œè¾“å…¥å¤„ç†</h3>
      <p>Original message: "{{ message }}"</p>
      <p>Computed reversed message: "{{ reversedMessage }}"</p>
      <!-- å®ç°è¡¨å•è¾“å…¥å’Œåº”ç”¨çŠ¶æ€ä¹‹é—´çš„åŒå‘ç»‘å®š -->
      <input v-model="message" />
      <button @click="reverseMess">é€†è½¬</button>
      <!-- raw html -->
      <!-- <p>Using mustaches: {{ rawHtml }}</p>
      <p>Using v-html directive: <span v-html="rawHtml"></span></p> -->
      <br />

      <span v-bind:title="message1">
        é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„æç¤ºä¿¡æ¯ï¼
      </span>

      <h3>æ¡ä»¶</h3>
      <p v-if="type === 'A'">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
      <p v-else-if="type === 'B'">ç¬¬äºŒæ¡åˆ†æ”¯</p>
      <p v-else>default show ğŸ˜¢</p>

      <h3>å¾ªç¯</h3>
      <ul>
        <li v-for="(todo,index) in todos" :key="todo.text">
          {{index}} - {{ todo.text }}
        </li>
      </ul>
      <ul v-for="set in sets">
        <li v-for="n in even(set)">{{ n }}</li>
      </ul>

      <h3>ç»„ä»¶æ¸²æŸ“</h3>
      <ol>
        <todo-item
          v-for="item in groceryList"
          v-bind:todo="item"
          v-bind:key="item.id"
        ></todo-item>
      </ol>

      {{ fullName }}

      <h3>Watch</h3>
      <p>
        Ask a yes/no question:
        <input v-model="question" />
      </p>
      <p>{{ answer }}</p>

      <!-- <app-nav></app-nav>
      <app-view>
        <app-sidebar></app-sidebar>
        <app-content></app-content>
      </app-view> -->

      <h3>bind class</h3>
      <div v-bind:class="classObject"></div>
      <div v-bind:class="[isActive ? isActive : '', error? 'text-danger':'']">
        <my-component class="baz boo"></my-component>
      </div>

      <div
        v-bind:style="{ color: activeColor, fontSize: fontSize + 'px' }"
      ></div>

      <h3>ç”¨ã€€key ç®¡ç†å¯å¤ç”¨å…ƒç´ </h3>
      <template v-if="loginType === 'username'">
        <label>Username:</label>
        <input placeholder="Enter your username" key="username-input" />
      </template>
      <template v-else>
        <label>Email:</label>
        <input placeholder="Enter your email address" key="email-input" />
      </template>
      <button @click="changeType">åˆ‡æ¢ç™»å½•æ–¹å¼</button>
    </div>
  </body>
  <script type="text/javascript">
    Vue.component("todo-item", {
      props: ["todo"],
      template: "<li>{{todo.key}}  {{ todo.text }}</li>"
    });
    Vue.component("my-component", {
      template: '<p class="foo bar">Hi</p>'
    });

    var watchExampleVM = new Vue({
      el: "#app",
      data: {
        message: "Hello Vue!",
        message1: "é¡µé¢åŠ è½½äº " + new Date(),
        type: "A",
        todos: [
          {
            text: "å­¦ä¹  JavaScript"
          },
          {
            text: "å­¦ä¹  Vue"
          },
          {
            text: "åšä¸ªé¡¹ç›®"
          }
        ],
        groceryList: [
          {
            id: 0,
            text: "è”¬èœ"
          },
          {
            id: 1,
            text: "æ°´æœ"
          },
          {
            id: 2,
            text: "éšä¾¿"
          }
        ],
        firstName: "Foo",
        lastName: "Bar",
        question: "",
        answer: "I cannot give you an answer until you ask a question!",
        isActive: true,
        error: null,
        activeColor: "red",
        fontSize: 30,
        loginType: "username",
        sets: [
          [1, 2, 3, 4, 5],
          [6, 7, 8, 9, 10]
        ]
      },
      computed: {
        // è®¡ç®—å±æ€§çš„ getter
        reversedMessage: function() {
          // `this` æŒ‡å‘ vm å®ä¾‹
          return this.message
            .split("")
            .reverse()
            .join("");
        },
        fullName: {
          get: function() {
            return this.firstName + " " + this.lastName;
          },
          set: function(newValue) {
            var names = newValue.split(" ");
            this.firstName = names[0];
            this.lastName = names[names.length - 1];
          }
        },
        classObject: function() {
          return {
            active: this.isActive && !this.error,
            "text-danger": this.error && this.error.type === "fatal"
          };
        }
      },
      methods: {
        reverseMess: function() {
          this.message = this.message
            .split("")
            .reverse()
            .join("");
        },
        getAnswer: function() {
          if (this.question.indexOf("?") === -1) {
            this.answer = "Questions usually contain a question mark. ;-)";
            return;
          }
          this.answer = "Thinking...";
          var vm = this;
          axios
            .get("https://yesno.wtf/api")
            .then(function(response) {
              vm.answer = _.capitalize(response.data.answer);
            })
            .catch(function(error) {
              vm.answer = "Error! Could not reach the API. " + error;
            });
        },
        changeType: function() {
          if (this.loginType == "username") {
            this.loginType = "email";
          } else {
            this.loginType = "username";
          }
        },
        even: function(numbers) {
          return numbers.filter(function(number) {
            return number % 2 === 0;
          });
        }
      },
      watch: {
        question: function(newQuestion, oldQuestion) {
          this.answer = "Waiting for you to stop typing...";
          this.debouncedGetAnswer();
        }
      },
      created: function() {
        // `_.debounce` æ˜¯ä¸€ä¸ªé€šè¿‡ Lodash é™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚
        // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¸Œæœ›é™åˆ¶è®¿é—® yesno.wtf/api çš„é¢‘ç‡
        // AJAX è¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº
        // `_.debounce` å‡½æ•° (åŠå…¶è¿‘äº² `_.throttle`) çš„çŸ¥è¯†ï¼Œ
        // è¯·å‚è€ƒï¼šhttps://lodash.com/docs#debounce
        this.debouncedGetAnswer = _.debounce(this.getAnswer, 500);
      }
    });
  </script>
</html>
